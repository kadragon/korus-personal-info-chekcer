# KORUS 개인정보처리시스템 접속기록 점검 도구

이 도구는 KORUS 개인정보 처리 시스템의 접속 기록 로그를 분석하여 개인정보 오남용 의심 사례를 자동으로 탐지하고 보고서를 생성합니다.

## 주요 기능

### 🔍 검사 유형

- **다운로드 사유 검사**: 개인정보 다운로드 시 부적절한 사유(짧거나 단순한 텍스트) 탐지
- **로그인 기록 검사**: 비정상적인 IP 변경 패턴, 업무시간 외/휴일 로그인 탐지
- **개인 파일 접근 검사**: 인사마스터 타인 조회, 대량 데이터 조회/저장 탐지

### 📊 분석 대상 패턴

- 다운로드 사유: 고유 문자 수 5개 이하, 총 다운로드 건수 100건 초과, 1시간 내 20건 이상
- 로그인: 1시간 내 3개 이상 IP 사용, 업무시간 외(23시~7시)/휴일 접근
- 개인 파일: 인사마스터 타인 접근, 조회 1000건 이상, 저장 100건 이상

## 설치 방법

### 요구사항

- Python 3.12 이상
- pip 또는 uv 패키지 관리자

### 1. 저장소 클론

```bash
git clone https://github.com/kadragon/korus-personal-info-checker
cd korus-personal-info-checker
```

### 2. 의존성 설치

```bash
# pip 사용
pip install .

# 또는 uv 사용 (권장)
uv sync
```

### 3. 환경 설정

`.env.example` 파일을 복사하여 `.env` 파일을 생성하고, 실제 경로로 수정하세요:

```bash
cp .env.example .env
```

`.env` 파일 내용:

```bash
DOWNLOAD_DIR=/path/to/your/log/files
SAVE_DIR=/path/to/save/reports
```

## 사용법

### 기본 실행

```bash
python src/main.py
```

실행 시 이전 달(YYYYMM)의 로그를 자동으로 분석하며, 다음과 같은 출력을 표시합니다:

```bash
개인정보 처리 현황 자동 점검 (202312월분)
원본 데이터 경로: /path/to/download/dir
결과 저장 경로: /path/to/save/dir/202312

--- [붙임2] 코러스 사용자 접근 기록 검사 ---
  [검출] 60분 내 3개 이상 IP 사용 (2건) -> 저장 파일: [붙임2] 코러스 사용자 접근 기록(60분IP)_202312.xlsx
  [양호] 업무 시간 외 로그인

--- [붙임3] 개인정보 접속 기록 검사 ---
  [검출] 조회 1000건 이상 (1명) -> 저장 파일: [붙임3] 개인정보 접속 기록(1000건이상조회)_202312.xlsx

--- [붙임4] 개인정보 다운로드 사유 검사 ---
  [검출] 사유 이상 -> 저장 파일: [붙임4] 개인정보 다운로드 사유(사유이상)_202312.xlsx

--- 압축 작업 시작 ---
  ✅ [붙임2].zip 생성 (2개 파일 포함)
  ✅ [붙임3].zip 생성 (1개 파일 포함)
  ✅ [붙임4].zip 생성 (3개 파일 포함)

┌─ 작업 완료 ──────────────────────────────────────────────────┐
│ 모든 작업이 완료되었습니다.                                   │
│                                                              │
│ 붙임2, 3, 4 원본 데이터 건수 합계: 15420건                   │
│                                                              │
│ 최종 결과는 아래 폴더를 확인해주세요.                         │
│ /path/to/save/dir/202312                                      │
└───────────────────────────────────────────────────────────────┘
```

### 입력 파일 형식

- 다운로드 사유: `개인정보 다운로드 사유_YYYYMM.xlsx`
- 로그인 기록: `사용자접속내역_Login내역_YYYYMM.xlsx`
- 개인 파일 접근: `개인정보 접속기록 조회_YYYYMM.xlsx`

### 출력 결과

- 각 검사별 필터링된 결과 Excel 파일
- 원본 데이터 병합 파일
- 압축된 ZIP 파일 (붙임2, 3, 4별로)

## 프로젝트 구조

```bash
korus-personal-info-checker/
├── src/
│   ├── main.py                 # 메인 실행 파일
│   ├── checkers/               # 검사 모듈 디렉토리
│   │   ├── download_reason_checker.py  # 다운로드 사유 검사
│   │   ├── login_checker.py            # 로그인 기록 검사
│   │   └── personal_file_checker.py    # 개인 파일 접근 검사
│   ├── display.py              # 터미널 출력 관리
│   └── utils.py                # 공통 유틸리티 함수
├── docs/
│   └── agents/                 # 에이전트 문서화
├── .env.example                # 환경 변수 템플릿
├── pyproject.toml              # 프로젝트 설정
├── README.md                   # 이 파일
└── uv.lock                    # 의존성 잠금 파일
```

## 개발 정보

### 코드 품질

- **린팅/포맷팅**: ruff
- **타입 체크**: mypy
- **보안 스캔**: bandit

### 테스트 실행

```bash
# 정적 분석
ruff check src/
mypy src/
bandit -r src/

# 개발 의존성 설치
pip install -e .[dev]
```

### 기여 방법

1. 이슈 생성 또는 기존 이슈 확인
2. 기능 브랜치 생성 (`git checkout -b feature/new-feature`)
3. 코드 작성 및 테스트
4. Pull Request 생성

## 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

## 문의

프로젝트 관련 문의사항은 이슈 트래커를 이용해주세요.
